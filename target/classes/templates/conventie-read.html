<!doctype html>
<html lang="ro" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Convenții 1.0</title>
    <base href="/">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>

<body>
    <div class="container">
        <nav aria-label="breadcrumb">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="/">Acasă</a></li>
                <li class="breadcrumb-item active" aria-current="page">Convenții</li>
            </ol>
        </nav>

        <div th:switch="${conventii}">
            <h2 th:case="null">Nu este nicio convenție în baza de date!</h2>
            <div th:case="*">
                <h2>Convenții</h2>
                <table class="table table-striped">
                    <thead>
                        <tr>
                            <th scope="col">#</th>
                            <th scope="col">Editeaza</th>
                            <th scope="col">Sterge</th>
                            <th scope="col">Status</th>
                            <th scope="col">Companie</th>
                            <th scope="col">Student</th>
                            <th scope="col">Locul desfășurării</th>
                            <th scope="col">Durata în planul de învățământ</th>
                            <th scope="col">Data început</th>
                            <th scope="col">Data sfârșit</th>
                            <th scope="col">Proiect</th>
                            <th scope="col">Tutore</th>
                            <th scope="col">Cadru didactic</th>
                            <th scope="col">Număr credite</th>
                            <th scope="col">Indemnizații</th>
                            <th scope="col">Avantaje</th>
                            <th scope="col">Alte precizări</th>
                            <th scope="col">Data întocmirii</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr th:each="conventie : ${conventii}">
                            <td th:text="${conventie.id}"></td>
                            <td>
                                <a th:href="@{/conventie-edit/{id}(id=${conventie.id})}" 
                                   class="btn btn-primary btn-sm">Editează</a>
                            </td>
                            <td>
                                <a th:href="@{/conventie-delete/{id}(id=${conventie.id})}" 
                                   class="btn btn-danger btn-sm"
                                   onclick="return confirm('Ești sigur că vrei să ștergi această convenție?')">
                                    Șterge
                                </a>
                            </td>
                            <td>
                                <span th:if="${conventie.status == T(ro.upt.ac.conventii.enums.ConventieStatus).IN_ASTEPTARE}" 
                                      class="badge bg-warning">În așteptare</span>
                                <span th:if="${conventie.status == T(ro.upt.ac.conventii.enums.ConventieStatus).APROBATA}" 
                                      class="badge bg-success">Aprobată</span>
                                <span th:if="${conventie.status == T(ro.upt.ac.conventii.enums.ConventieStatus).RESPINSA}" 
                                      class="badge bg-danger">Respinsă</span>
                            </td>
                            <td th:text="${conventie.companie?.nume}"></td>
                            <td th:text="${conventie.student?.nume + ' ' + conventie.student?.prenume}"></td>
                            <td th:text="${conventie.loculDesfasurarii}"></td>
                            <td th:text="${conventie.durataInPlanulDeInvatamant}"></td>
                            <td th:text="${#dates.format(conventie.dataInceput, 'dd.MM.yyyy')}"></td>
                            <td th:text="${#dates.format(conventie.dataSfarsit, 'dd.MM.yyyy')}"></td>
                            <td th:text="${conventie.numeProiect}"></td>
                            <td th:text="${conventie.tutore?.nume + ' ' + conventie.tutore?.prenume}"></td>
                            <td th:text="${conventie.cadruDidactic?.nume + ' ' + conventie.cadruDidactic?.prenume}"></td>
                            <td th:text="${conventie.numarCredite}"></td>
                            <td th:text="${conventie.indemnizatii}"></td>
                            <td th:text="${conventie.avantaje}"></td>
                            <td th:text="${conventie.altePrecizari}"></td>
                            <td th:text="${#dates.format(conventie.dataIntocmirii, 'dd.MM.yyyy')}"></td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <p>
                <a href="/conventie-create" class="btn btn-primary">
                    <i class="bi bi-plus-circle"></i> Adaugă o convenție nouă
                </a>
            </p>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
</body>
</html>